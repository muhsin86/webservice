"use strict";window.onload=getCourses();var updatedCourseId,deletedCourseId,fetchedCourses=[];function getCourses(){fetch("http://localhost/web3api2020-master/src/model/courses.php",{method:"GET"}).then((function(e){return e.json()})).then((function(e){fetchedCourses=e,document.querySelector("#courseList").innerHTML="",e.forEach((function(e){document.querySelector("#courseList").innerHTML+="\n                    <tr>\n                    <td>".concat(e.startdate," - ").concat(e.enddate,"</td>\n                    <td>").concat(e.course,"</td>\n                    <td>").concat(e.hei,'</td>\n                    <td><a href="').concat(e.url,'" class="projects__link" target="_blank">').concat(e.url,'</a></td>\n                    <td><button onClick="openUpdateModal(').concat(e.id,')">Update</button></td>\n                    <td><button onClick="openDeleteModal(').concat(e.id,')">Delete</button></td>\n                    </tr>\n                    ')}))}))}function openUpdateModal(e){updatedCourseId=e;var t=fetchedCourses.find((function(t){return t.id==e}));document.querySelector(".update-modal").style.display="block",document.querySelector("#update-courseform #startdate").value=t.startdate,document.querySelector("#update-courseform #enddate").value=t.enddate,document.querySelector("#update-courseform #course").value=t.course,document.querySelector("#update-courseform #hei").value=t.hei,document.querySelector("#update-courseform #url").value=t.url}function closeUpdateModal(){document.querySelector(".update-modal").style.display="none"}function openDeleteModal(e){deletedCourseId=e;var t=fetchedCourses.find((function(t){return t.id==e}));document.querySelector(".delete-course-modal").style.display="block",document.querySelector(".delete-course-modal .info").innerHTML="",document.querySelector(".delete-course-modal .info").insertAdjacentHTML("afterbegin","\n  <p><strong>Start date: ".concat(t.startdate,"</strong></p>\n  <p><strong>End date: ").concat(t.enddate,"</strong></p>\n  <p><strong>Course: ").concat(t.course,"</strong></p>\n  <p><strong>Hei: ").concat(t.hei,"</strong></p>\n  <p><strong>Url: ").concat(t.url,"</strong></p>\n  "))}function closeDeleteModal(){document.querySelector(".delete-course-modal").style.display="none"}function addCourse(e){e.preventDefault();var t={startdate:document.getElementById("startdate").value,enddate:document.getElementById("enddate").value,course:document.getElementById("course").value,hei:document.getElementById("hei").value,url:document.getElementById("url").value};fetch("http://localhost/web3api2020-master/src/model/courses.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){console.log(e),document.querySelector(".courseform .alert").innerHTML="",document.querySelector(".courseform .alert").insertAdjacentHTML("afterbegin",'<div style="background-color: green; color: white; padding: 5px">'+e.message+"</div>"),document.getElementById("startdate").value="",document.getElementById("enddate").value="",document.getElementById("course").value="",document.getElementById("hei").value="",document.getElementById("url").value="",getCourses()})).catch((function(e){return e}))}function deleteCourse(){fetch("http://localhost/web3api2020-master/src/model/courses.php",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:deletedCourseId})}).then((function(e){return e.json()})).then((function(e){closeDeleteModal(),getCourses(),document.querySelector(".courseform .alert").innerHTML="",document.querySelector(".courseform .alert").insertAdjacentHTML("afterbegin",'<div style="background-color: red; color: white; padding: 5px">'+e.message+"</div>")})).catch((function(e){return e}))}function updateCourse(){var e=document.querySelector("#update-courseform #startdate").value,t=document.querySelector("#update-courseform #enddate").value,o=document.querySelector("#update-courseform #course").value,n=document.querySelector("#update-courseform #hei").value,r=document.querySelector("#update-courseform #url").value,d={id:updatedCourseId,startdate:e,enddate:t,course:o,hei:n,url:r};fetch("http://localhost/web3api2020-master/src/model/courses.php",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){closeUpdateModal(),getCourses(),document.querySelector(".courseform .alert").innerHTML="",document.querySelector(".courseform .alert").insertAdjacentHTML("afterbegin",'<div style="background-color: green; color: white; padding: 5px">'+e.message+"</div>")})).catch((function(e){return e}))}document.getElementById("courseform").addEventListener("submit",addCourse),window.addEventListener("load",getCourses),document.querySelector(".update-course-btn").addEventListener("click",updateCourse),document.querySelector(".delete-course-btn").addEventListener("click",deleteCourse);